<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¥“ä¹‹è°· BOSS è¿½è¹¤å™¨</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // âš ï¸ è«‹åœ¨é€™è£¡å¡«å…¥ä½ çš„ Firebase é…ç½®
        // å‰å¾€ https://console.firebase.google.com å–å¾—ä½ çš„é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyD4_sWkjsl_gMOTkjiFdFV9pxcPMrXOU0M",
            authDomain: "maple-boss-tracker.firebaseapp.com",
            databaseURL: "https://maple-boss-tracker-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "maple-boss-tracker",
            storageBucket: "maple-boss-tracker.firebasestorage.app",
            messagingSenderId: "261307144960",
            appId: "1:261307144960:web:ee428ceaea5bae1efab1e5"
            };

        // åˆå§‹åŒ– Firebase
        let database = null;
        let isFirebaseConfigured = false;
        
        try {
            if (firebaseConfig.apiKey !== "YOUR_API_KEY_HERE") {
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                database = firebase.database();
                isFirebaseConfigured = true;
            }
        } catch (error) {
            console.error("Firebase åˆå§‹åŒ–éŒ¯èª¤:", error);
        }

        // Lucide Icons çµ„ä»¶
        const Clock = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
            </svg>
        );

        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
        );

        const XCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
        );

        const Plus = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );

        const Trash2 = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                <line x1="10" y1="11" x2="10" y2="17"/>
                <line x1="14" y1="11" x2="14" y2="17"/>
            </svg>
        );

        const Users = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
        );

        const User = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
        );

        const RefreshCw = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="23 4 23 10 17 10"/>
                <polyline points="1 20 1 14 7 14"/>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
            </svg>
        );

        const AlertCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
        );

        const BOSS_PRESETS = [
            { name: 'ç´…å¯¶ç‹', respawnMin: 23, respawnMax: 30 },
            { name: 'æ¨¹å¦–ç‹', respawnMin: 23, respawnMax: 30 },
            { name: 'å†¥ç•Œå¹½éˆ', respawnMin: 45, respawnMax: 60 },
            { name: 'æ®­å±çŒ´ç‹', respawnMin: 38, respawnMax: 45 },
            { name: 'å·¨å±…èŸ¹', respawnMin: 45, respawnMax: 60 },
            { name: 'æ²¼æ¾¤å·¨é±·', respawnMin: 90, respawnMax: 135 },
            { name: 'è˜‘è‡ç‹', respawnMin: 210, respawnMax: 240 },
            { name: 'æ®­å±è˜‘è‡ç‹', respawnMin: 195, respawnMax: 225 },
            { name: 'å·´æ´›å¤', respawnMin: 405, respawnMax: 540 },
            { name: 'é›ªå±±å¥³å·«', respawnMin: 158, respawnMax: 180 },
            { name: 'å„é‹æ­»ç¥', respawnMin: 45, respawnMax: 105 },
            { name: 'é›ªæ¯›æ€ªäºº', respawnMin: 45, respawnMax: 68 },
            { name: 'è‰¾åˆ©æ°', respawnMin: 118, respawnMax: 128 },
            { name: 'å’•å’•é˜', respawnMin: 68, respawnMax: 90 },
            { name: 'æ›¸ç”Ÿå¹½éˆ', respawnMin: 150, respawnMax: 300 },
            { name: 'è‘›é›·é‡‘å‰›', respawnMin: 270, respawnMax: 350 },
            { name: 'ä¹å°¾å¦–ç‹', respawnMin: 210, respawnMax: 570 },
            { name: 'è˜‘è‡ç‹', respawnMin: 210, respawnMax: 240 },
            { name: 'æµ·æ€’æ–¯', respawnMin: 180, respawnMax: 300 },
            { name: 'ä»™äººé•·è€', respawnMin: 68, respawnMax: 90 },
            { name: 'ç´…è—é›™æ€ª', respawnMin: 113, respawnMax: 135 },
            { name: 'è‡ªå‹•è­¦å‚™ç³»çµ±', respawnMin: 158, respawnMax: 173 },
            { name: 'Dï¼æ´›ä¼Š', respawnMin: 150, respawnMax: 165 },
            { name: 'å¥‡ç¾æ‹‰', respawnMin: 120, respawnMax: 135 },
            { name: 'ä»™äººå¨ƒå¨ƒ', respawnMin: 158, respawnMax: 180 },
            { name: 'å·¨å¤§æ·±å±±äººè”˜', respawnMin: 60, respawnMax: 135 },
            { name: 'è‚¯å¾·ç†Š', respawnMin: 113, respawnMax: 128 },
            { name: 'å–µæ€ªä»™äºº', respawnMin: 150, respawnMax: 170 },
            { name: 'å™´ç«é¾', respawnMin: 20, respawnMax: 60 },
            { name: 'æ ¼ç‘èŠ¬å¤š', respawnMin: 20, respawnMax: 60 },
            { name: 'å¯’éœœå†°é¾', respawnMin: 240, respawnMax: 720 },
            { name: 'å¤šå¤š', respawnMin: 45, respawnMax: 315 },
            { name: 'åˆ©é‡Œè«¾æ–¯', respawnMin: 45, respawnMax: 315 },
            { name: 'èŠä¼Šå¡', respawnMin: 45, respawnMax: 315 },
            { name: 'ç«¹åˆ€æ­¦å£«', respawnMin: 113, respawnMax: 128 },
            { name: 'è—è‰²è˜‘è‡ç‹', respawnMin: 1000, respawnMax: 1880 },
            { name: 'èœˆèš£ç‹', respawnMin: 45, respawnMax: 135 },
            { name: 'é»‘è¼ªç‹', respawnMin: 780, respawnMax: 1020 },
        ];

        const BossTracker = () => {
            const [selectedChannel, setSelectedChannel] = useState(1);
            const [bosses, setBosses] = useState({});
            const [currentTime, setCurrentTime] = useState(new Date());
            const [showAddBoss, setShowAddBoss] = useState(false);
            const [newBossName, setNewBossName] = useState('');
            const [newBossRespawnMin, setNewBossRespawnMin] = useState(60);
            const [newBossRespawnMax, setNewBossRespawnMax] = useState(90);
            const [useSharedData, setUseSharedData] = useState(isFirebaseConfigured);
            const [isLoading, setIsLoading] = useState(true);
            const [lastUpdate, setLastUpdate] = useState(null);
            const [onlineUsers, setOnlineUsers] = useState(0);

            // å¾ localStorage æˆ– Firebase è¼‰å…¥è³‡æ–™
            useEffect(() => {
                if (useSharedData && database) {
                    // ç›£è½ Firebase è³‡æ–™è®ŠåŒ–
                    const bossesRef = database.ref('bosses');
                    
                    const handleData = (snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            // è½‰æ› deathTime å› Date ç‰©ä»¶
                            Object.keys(data).forEach(ch => {
                                Object.keys(data[ch]).forEach(boss => {
                                    if (data[ch][boss].deathTime) {
                                        data[ch][boss].deathTime = new Date(data[ch][boss].deathTime);
                                    }
                                });
                            });
                            setBosses(data);
                            setLastUpdate(new Date());
                        }
                        setIsLoading(false);
                    };

                    bossesRef.on('value', handleData);
                    return () => bossesRef.off('value', handleData);
                } else {
                    // ä½¿ç”¨ localStorage
                    const saved = localStorage.getItem('mapleBossTracker');
                    if (saved) {
                        const parsed = JSON.parse(saved);
                        Object.keys(parsed).forEach((ch) => {
                            Object.keys(parsed[ch]).forEach((boss) => {
                                if (parsed[ch][boss].deathTime) {
                                    parsed[ch][boss].deathTime = new Date(parsed[ch][boss].deathTime);
                                }
                            });
                        });
                        setBosses(parsed);
                    }
                    setIsLoading(false);
                }
            }, [useSharedData]);

            // åœ¨ç·šäººæ•¸çµ±è¨ˆï¼ˆåªåœ¨ Firebase æ¨¡å¼ï¼‰
            useEffect(() => {
                if (!useSharedData || !database) return;

                const connectionsRef = database.ref('connections');
                const myConnectionRef = connectionsRef.push();

                myConnectionRef.set(true);
                myConnectionRef.onDisconnect().remove();

                connectionsRef.on('value', (snapshot) => {
                    setOnlineUsers(snapshot.numChildren());
                });

                return () => {
                    myConnectionRef.remove();
                    connectionsRef.off();
                };
            }, [useSharedData]);

            // å®šæ™‚æ›´æ–°æ™‚é–“
            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);
                return () => clearInterval(timer);
            }, []);

            // å„²å­˜è³‡æ–™
            useEffect(() => {
                if (isLoading) return;
                
                if (useSharedData && database) {
                    // ä¸éœ€è¦åœ¨é€™è£¡æ›´æ–°ï¼Œå› ç‚ºæœƒåœ¨æ“ä½œæ™‚ç›´æ¥æ›´æ–°
                } else {
                    if (Object.keys(bosses).length > 0) {
                        localStorage.setItem('mapleBossTracker', JSON.stringify(bosses));
                    }
                }
            }, [bosses, useSharedData, isLoading]);

            // æ›´æ–° Firebase è³‡æ–™
            const updateFirebase = (newBosses) => {
                if (useSharedData && database) {
                    database.ref('bosses').set(newBosses).catch((error) => {
                        console.error('æ›´æ–°å¤±æ•—:', error);
                        alert('æ›´æ–°è³‡æ–™å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·š');
                    });
                }
            };

            const addBossToChannel = (channel, bossData) => {
                const newBosses = {
                    ...bosses,
                    [channel]: {
                        ...(bosses[channel] || {}),
                        [bossData.name]: {
                            respawnMin: bossData.respawnMin,
                            respawnMax: bossData.respawnMax,
                            deathTime: null,
                            isAlive: true,
                        }
                    }
                };
                setBosses(newBosses);
                updateFirebase(newBosses);
            };

            const toggleBossStatus = (channel, bossName) => {
                const boss = bosses[channel]?.[bossName];
                if (!boss) return;

                const newBosses = {
                    ...bosses,
                    [channel]: {
                        ...bosses[channel],
                        [bossName]: {
                            ...boss,
                            isAlive: !boss.isAlive,
                            deathTime: boss.isAlive ? new Date().toISOString() : null,
                        }
                    }
                };
                setBosses(newBosses);
                updateFirebase(newBosses);
            };

            const removeBoss = (channel, bossName) => {
                const newChannel = { ...bosses[channel] };
                delete newChannel[bossName];
                const newBosses = {
                    ...bosses,
                    [channel]: newChannel
                };
                setBosses(newBosses);
                updateFirebase(newBosses);
            };

            const getRespawnTimeRange = (boss) => {
                if (!boss.deathTime) return null;
                
                const now = currentTime;
                const minRespawn = new Date(boss.deathTime.getTime() + boss.respawnMin * 60000);
                const maxRespawn = new Date(boss.deathTime.getTime() + boss.respawnMax * 60000);
                
                const formatTime = (date) => {
                    return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}:${String(date.getSeconds()).padStart(2, '0')}`;
                };

                const timeElapsed = Math.floor((now - boss.deathTime) / 60000);
                const minRemaining = Math.max(0, boss.respawnMin - timeElapsed);
                const maxRemaining = Math.max(0, boss.respawnMax - timeElapsed);

                return {
                    minTime: formatTime(minRespawn),
                    maxTime: formatTime(maxRespawn),
                    minRemaining,
                    maxRemaining,
                    isPossiblyAlive: timeElapsed >= boss.respawnMin
                };
            };

            const channelBosses = bosses[selectedChannel] || {};

            // Firebase æœªé…ç½®æç¤º
            if (!isFirebaseConfigured) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-4 flex items-center justify-center">
                        <div className="bg-white/10 backdrop-blur-md rounded-lg shadow-2xl p-8 max-w-3xl">
                            <div className="flex items-center gap-3 mb-4">
                                <AlertCircle className="text-yellow-400" size={48} />
                                <h1 className="text-3xl font-bold text-white">Firebase å°šæœªé…ç½®</h1>
                            </div>
                            <div className="text-white space-y-4">
                                <p className="text-lg">ç›®å‰ä½¿ç”¨æœ¬åœ°å„²å­˜æ¨¡å¼ï¼Œå¦‚éœ€å•Ÿç”¨å¤šäººå…±äº«åŠŸèƒ½ï¼Œè«‹é…ç½® Firebaseã€‚</p>
                                
                                <div className="bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4">
                                    <h3 className="font-bold mb-2">ğŸ“‹ è¨­å®šæ­¥é©Ÿï¼š</h3>
                                    <ol className="list-decimal list-inside space-y-2 ml-2">
                                        <li>å‰å¾€ <a href="https://console.firebase.google.com" target="_blank" className="text-blue-300 underline">Firebase Console</a></li>
                                        <li>å‰µå»ºæ–°å°ˆæ¡ˆï¼ˆæˆ–é¸æ“‡ç¾æœ‰å°ˆæ¡ˆï¼‰</li>
                                        <li>å•Ÿç”¨ <strong>Realtime Database</strong></li>
                                        <li>å°‡è³‡æ–™åº«è¦å‰‡è¨­ç‚ºï¼š
                                            <pre className="bg-black/30 p-2 rounded mt-1 text-sm overflow-x-auto">
{`{
  "rules": {
    ".read": true,
    ".write": true
  }
}`}
                                            </pre>
                                        </li>
                                        <li>åœ¨å°ˆæ¡ˆè¨­å®šä¸­å–å¾—é…ç½®è³‡è¨Š</li>
                                        <li>å°‡é…ç½®å¡«å…¥æ­¤ HTML æ–‡ä»¶çš„ <code className="bg-black/30 px-1 rounded">firebaseConfig</code></li>
                                    </ol>
                                </div>

                                <button
                                    onClick={() => window.location.reload()}
                                    className="w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
                                >
                                    é‡æ–°è¼‰å…¥é é¢
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="bg-white/10 backdrop-blur-md rounded-lg shadow-2xl p-6 mb-6">
                            <h1 className="text-4xl font-bold text-white mb-2 text-center">æ¥“ä¹‹è°· BOSS è¿½è¹¤å™¨</h1>
                            <p className="text-blue-200 text-center">
                                {useSharedData ? 'å¤šäººå³æ™‚å…±äº« - è¿½è¹¤å„é »é“ BOSS é‡ç”Ÿæ™‚é–“' : 'è¿½è¹¤å„é »é“ BOSS é‡ç”Ÿæ™‚é–“'}
                            </p>
                            
                            <div className="flex items-center justify-center gap-4 mt-4 flex-wrap">
                                {isFirebaseConfigured && (
                                    <button
                                        onClick={() => setUseSharedData(!useSharedData)}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all ${
                                            useSharedData
                                                ? 'bg-green-500 text-white'
                                                : 'bg-gray-500 text-white'
                                        }`}
                                    >
                                        {useSharedData ? <Users size={20} /> : <User size={20} />}
                                        {useSharedData ? 'å…±äº«æ¨¡å¼' : 'å€‹äººæ¨¡å¼'}
                                    </button>
                                )}
                                
                                {useSharedData && (
                                    <div className="flex items-center gap-2 bg-green-500/30 px-4 py-2 rounded-lg">
                                        <Users size={20} className="text-green-300" />
                                        <span className="text-white font-semibold">{onlineUsers} äººåœ¨ç·š</span>
                                    </div>
                                )}
                                
                                {lastUpdate && useSharedData && (
                                    <span className="text-blue-200 text-sm">
                                        æœ€å¾Œæ›´æ–°: {lastUpdate.toLocaleTimeString('zh-TW', { hour12: false })}
                                    </span>
                                )}
                            </div>
                        </div>

                        <div className="bg-white/10 backdrop-blur-md rounded-lg shadow-xl p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-xl font-bold text-white">é¸æ“‡é »é“</h2>
                                <div className="text-blue-200">ç•¶å‰æ™‚é–“: {currentTime.toLocaleTimeString('zh-TW', { hour12: false })}</div>
                            </div>
                            
                            <div className="grid grid-cols-5 sm:grid-cols-10 gap-2">
                                {[...Array(40)].map((_, i) => (
                                    <button
                                        key={i + 1}
                                        onClick={() => setSelectedChannel(i + 1)}
                                        className={`py-2 px-3 rounded-lg font-semibold transition-all ${
                                            selectedChannel === i + 1
                                                ? 'bg-blue-500 text-white scale-105 shadow-lg'
                                                : 'bg-white/20 text-white hover:bg-white/30'
                                        }`}
                                    >
                                        {i + 1}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {isLoading ? (
                            <div className="bg-white/10 backdrop-blur-md rounded-lg shadow-xl p-12 text-center">
                                <RefreshCw className="animate-spin mx-auto mb-4 text-white" size={48} />
                                <p className="text-white text-xl">è¼‰å…¥ä¸­...</p>
                            </div>
                        ) : (
                            <div className="bg-white/10 backdrop-blur-md rounded-lg shadow-xl p-6">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-white">é »é“ {selectedChannel} - BOSS ç‹€æ…‹</h2>
                                    <button
                                        onClick={() => setShowAddBoss(!showAddBoss)}
                                        className="flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors"
                                    >
                                        <Plus size={20} />
                                        æ–°å¢ BOSS
                                    </button>
                                </div>

                                {showAddBoss && (
                                    <div className="bg-white/20 rounded-lg p-4 mb-6">
                                        <h3 className="text-lg font-semibold text-white mb-3">å¿«é€Ÿæ–°å¢é è¨­ BOSS</h3>
                                        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mb-4">
                                            {BOSS_PRESETS.map((boss) => (
                                                <button
                                                    key={boss.name}
                                                    onClick={() => addBossToChannel(selectedChannel, boss)}
                                                    className="bg-purple-500 hover:bg-purple-600 text-white px-3 py-2 rounded transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed"
                                                    disabled={channelBosses[boss.name]}
                                                >
                                                    {boss.name}
                                                </button>
                                            ))}
                                        </div>

                                        
                                    </div>
                                )}

                                {Object.keys(channelBosses).length === 0 ? (
                                    <div className="text-center text-white/70 py-12">
                                        <p className="text-lg">æ­¤é »é“å°šæœªæ–°å¢ä»»ä½• BOSS</p>
                                        <p className="text-sm mt-2">é»æ“Šä¸Šæ–¹ã€Œæ–°å¢ BOSSã€æŒ‰éˆ•é–‹å§‹è¿½è¹¤</p>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {Object.entries(channelBosses).map(([bossName, boss]) => {
                                            const respawnInfo = getRespawnTimeRange(boss);
                                            
                                            return (
                                                <div
                                                    key={bossName}
                                                    className={`rounded-lg p-4 transition-all ${
                                                        boss.isAlive
                                                            ? 'bg-green-500/30 border-2 border-green-400'
                                                            : respawnInfo?.isPossiblyAlive
                                                            ? 'bg-yellow-500/30 border-2 border-yellow-400'
                                                            : 'bg-red-500/30 border-2 border-red-400'
                                                    }`}
                                                >
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex items-center gap-3 flex-1">
                                                            {boss.isAlive ? (
                                                                <CheckCircle className="text-green-300" size={24} />
                                                            ) : (
                                                                <XCircle className="text-red-300" size={24} />
                                                            )}
                                                            <div className="flex-1">
                                                                <h3 className="text-xl font-bold text-white">{bossName}</h3>
                                                                <p className="text-sm text-white/80">
                                                                    é‡ç”Ÿæ™‚é–“: {boss.respawnMin}-{boss.respawnMax} åˆ†é˜
                                                                </p>
                                                                {!boss.isAlive && respawnInfo && (
                                                                    <div className="mt-2 space-y-1">
                                                                        <p className="text-white flex items-center gap-2">
                                                                            <Clock size={16} />
                                                                            é è¨ˆé‡ç”Ÿ: {respawnInfo.minTime} ~ {respawnInfo.maxTime}
                                                                        </p>
                                                                        {respawnInfo.isPossiblyAlive ? (
                                                                            <p className="text-yellow-300 font-semibold">
                                                                                âš ï¸ å¯èƒ½å·²é‡ç”Ÿï¼å»ºè­°å‰å¾€ç¢ºèª
                                                                            </p>
                                                                        ) : (
                                                                            <p className="text-white/90">
                                                                                å‰©é¤˜æ™‚é–“: {respawnInfo.minRemaining} ~ {respawnInfo.maxRemaining} åˆ†é˜
                                                                            </p>
                                                                        )}
                                                                    </div>
                                                                )}
                                                            </div>
                                                        </div>
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => toggleBossStatus(selectedChannel, bossName)}
                                                                className={`px-4 py-2 rounded-lg font-semibold transition-colors ${
                                                                    boss.isAlive
                                                                        ? 'bg-red-500 hover:bg-red-600'
                                                                        : 'bg-green-500 hover:bg-green-600'
                                                                } text-white`}
                                                            >
                                                                {boss.isAlive ? 'æ¨™è¨˜æ­»äº¡' : 'æ¨™è¨˜é‡ç”Ÿ'}
                                                            </button>
                                                            <button
                                                                onClick={() => removeBoss(selectedChannel, bossName)}
                                                                className="bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg transition-colors"
                                                            >
                                                                <Trash2 size={20} />
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        )}

                        <div className="mt-6 bg-white/10 backdrop-blur-md rounded-lg p-4">
                            <h3 className="text-white font-semibold mb-2 flex items-center gap-2">
                                <Users size={20} />
                                ä½¿ç”¨èªªæ˜
                            </h3>
                            <div className="text-white/80 text-sm space-y-1">
                                {useSharedData ? (
                                    <>
                                        <p>â€¢ ğŸŒ <strong>å³æ™‚åŒæ­¥</strong>ï¼šæ‰€æœ‰ä½¿ç”¨è€…å³æ™‚çœ‹åˆ°ç›¸åŒçš„ BOSS ç‹€æ…‹</p>
                                        <p>â€¢ ğŸ‘¥ <strong>å¤šäººå”ä½œ</strong>ï¼šä»»ä½•äººéƒ½å¯ä»¥æ›´æ–° BOSS ç‹€æ…‹</p>
                                        <p>â€¢ â˜ï¸ <strong>é›²ç«¯å„²å­˜</strong>ï¼šè³‡æ–™æ°¸ä¹…ä¿å­˜åœ¨ Firebase</p>
                                        <p>â€¢ ğŸ“± <strong>è·¨è£ç½®</strong>ï¼šæ‰‹æ©Ÿã€å¹³æ¿ã€é›»è…¦éƒ½èƒ½ä½¿ç”¨</p>
                                    </>
                                ) : (
                                    <>
                                        <p>â€¢ ğŸ’¾ <strong>æœ¬åœ°å„²å­˜</strong>ï¼šè³‡æ–™å„²å­˜åœ¨ä½ çš„ç€è¦½å™¨</p>
                                        <p>â€¢ ğŸ”’ <strong>éš±ç§æ¨¡å¼</strong>ï¼šå…¶ä»–äººçœ‹ä¸åˆ°ä½ çš„è³‡æ–™</p>
                                        <p>â€¢ ğŸ“± <strong>é›¢ç·šå¯ç”¨</strong>ï¼šä¸éœ€è¦ç¶²è·¯é€£ç·š</p>
                                        {isFirebaseConfigured && <p>â€¢ ğŸ’¡ åˆ‡æ›åˆ°å…±äº«æ¨¡å¼å¯èˆ‡æœ‹å‹ä¸€èµ·ä½¿ç”¨</p>}
                                    </>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<BossTracker />);
    </script>
</body>
</html>